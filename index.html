<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Box Layering System - Labels & Protection</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #1a1a1a; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        
        /* ‡∏õ‡∏∏‡πà‡∏° Toggle ‡πÅ‡∏ö‡∏ö Minimal */
        #toggle-info {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 20;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }
        #toggle-info:hover {
            background: rgba(0, 212, 255, 0.8);
            border-color: #00d4ff;
        }

        #info {
            position: absolute;
            top: 70px;
            left: 20px;
            color: white;
            background: rgba(0,0,0,0.85);
            padding: 20px;
            border-radius: 12px;
            z-index: 10;
            border: 1px solid #444;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô */
        }
        
        #controls-hint {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: #ccc;
            background: rgba(0,0,0,0.5);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 13px;
        }
        #credit {
            position: absolute;
            bottom: 20px;
            right: 20px;
            color: rgba(255,255,255,0.4);
            font-size: 12px;
            letter-spacing: 1px;
        }
        b { color: #00d4ff; }
        .label-wood { color: #deb887; }
        .label-plastic { color: #4dabf7; }
        .label-hood { color: #ff4d4d; }
    </style>
</head>
<body>

    <button id="toggle-info">?</button>

    <div id="info">
        <b>‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏û‡∏≤‡πÄ‡∏•‡∏ó‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ù‡∏∏‡πà‡∏ô</b><br>
        <span class="label-wood">‡∏ã‡πâ‡∏≤‡∏¢: Wood Pallet (8 ‡∏ä‡∏±‡πâ‡∏ô)</span><br>
        <span class="label-plastic">‡∏Å‡∏•‡∏≤‡∏á: Plastic Pallet Blue (12 ‡∏ä‡∏±‡πâ‡∏ô)</span><br>
        <span class="label-hood">‡∏Ç‡∏ß‡∏≤: Plastic Red + Hood Protection</span><br>
        <hr style="border:0; border-top:1px solid #444; margin:10px 0;">
        <small id="face-name">Floating Labels: 1126NK 0260204008</small>
    </div>

    <div id="controls-hint">
        üñ±Ô∏è ‡∏´‡∏°‡∏∏‡∏ô‡∏£‡∏≠‡∏ö‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏ | üîç ‡∏ã‡∏π‡∏° | üì¶ ‡∏õ‡πâ‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≥‡∏Å‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Å‡∏≠‡∏á
    </div>

    <div id="credit">
        Created by Jamorn
    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        // ‡∏£‡∏∞‡∏ö‡∏ö Toggle Info Panel
        const infoBtn = document.getElementById('toggle-info');
        const infoPanel = document.getElementById('info');
        let isPanelVisible = false;

        infoBtn.addEventListener('click', () => {
            isPanelVisible = !isPanelVisible;
            infoPanel.style.display = isPanelVisible ? 'block' : 'none';
            infoBtn.textContent = isPanelVisible ? '‚úï' : '?';
            infoBtn.style.background = isPanelVisible ? 'rgba(255, 77, 77, 0.8)' : 'rgba(255, 255, 255, 0.2)';
        });

        class ArtworkGenerator {
            static createFloatingLabel(text, bgColor = '#00d4ff') {
                const canvas = document.createElement('canvas');
                canvas.width = 1024;
                canvas.height = 256;
                const ctx = canvas.getContext('2d');
                
                // Background
                ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                ctx.roundRect(0, 0, canvas.width, canvas.height, 40);
                ctx.fill();
                
                // Border
                ctx.strokeStyle = bgColor;
                ctx.lineWidth = 10;
                ctx.strokeRect(5, 5, canvas.width - 10, canvas.height - 10);
                
                // Text
                ctx.fillStyle = 'white';
                ctx.font = 'bold 60px sans-serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(text, canvas.width / 2, canvas.height / 2);

                const texture = new THREE.CanvasTexture(canvas);
                const material = new THREE.SpriteMaterial({ map: texture, transparent: true });
                const sprite = new THREE.Sprite(material);
                sprite.scale.set(120, 30, 1);
                return sprite;
            }

            static createFrontLabel() {
                const canvas = document.createElement('canvas');
                canvas.width = 1024; canvas.height = 1500;
                const ctx = canvas.getContext('2d');
                ctx.fillStyle = '#ffffff'; ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.strokeStyle = '#222'; ctx.lineWidth = 40;
                ctx.strokeRect(80, 80, canvas.width - 160, canvas.height - 160);
                
                ctx.fillStyle = '#e91e63'; ctx.font = 'bold 120px sans-serif'; ctx.textAlign = 'center';
                ctx.fillText('PREMIUM', canvas.width / 2, 400);
                ctx.fillStyle = '#333'; ctx.font = 'bold 160px sans-serif';
                ctx.fillText('PRODUCT', canvas.width / 2, 560);
                
                ctx.fillStyle = '#00d4ff'; ctx.fillRect(200, 640, canvas.width - 400, 20);
                ctx.font = '60px sans-serif'; ctx.fillStyle = '#666';
                ctx.fillText('Size: 27 x 40 x 12 cm', canvas.width / 2, 900);
                
                ctx.fillStyle = '#000';
                for(let i=0; i<30; i++) {
                    ctx.fillRect(250 + (i*18), 1100, 10, 150);
                }

                const texture = new THREE.CanvasTexture(canvas);
                texture.anisotropy = 16;
                return texture;
            }

            static createSideTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 4096; canvas.height = 1024;
                const ctx = canvas.getContext('2d');
                ctx.fillStyle = '#ffffff'; ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#000000'; ctx.textBaseline = 'middle';
                const midY = 512;
                const centerX = canvas.width / 2;
                let startX = centerX - 1600; 

                ctx.textAlign = 'left';
                ctx.font = 'bold 130px sans-serif';
                ctx.fillText('1126NK 0260204008', startX, midY);
                startX += 1380; 

                const symbolX = startX + 100;
                const symbolY = midY;
                ctx.lineWidth = 14; ctx.strokeStyle = '#000';
                ctx.beginPath();
                ctx.moveTo(symbolX, symbolY - 75); ctx.lineTo(symbolX + 75, symbolY); ctx.lineTo(symbolX, symbolY + 75); ctx.lineTo(symbolX - 75, symbolY);
                ctx.closePath(); ctx.stroke();
                ctx.beginPath(); ctx.moveTo(symbolX, symbolY - 75); ctx.lineTo(symbolX, symbolY + 75); ctx.stroke();
                ctx.beginPath(); ctx.moveTo(symbolX - 35, symbolY); ctx.lineTo(symbolX + 35, symbolY); ctx.stroke();

                ctx.font = 'bold 60px sans-serif';
                ctx.fillText('TIS.1306-2566', symbolX + 110, midY - 38);
                ctx.fillText('PP-01-1-5-F', symbolX + 110, midY + 38);
                startX += 640; 

                const qrX = startX; const qrY = midY - 85;
                ctx.fillRect(qrX, qrY, 170, 170); ctx.fillStyle = '#fff';
                for(let i=0; i<3; i++) for(let j=0; j<3; j++) if((i+j)%2==0) ctx.fillRect(qrX+18+(i*48), qrY+18+(j*48), 40, 40);
                ctx.fillStyle = '#000';
                startX += 280; 

                ctx.font = 'bold 75px sans-serif';
                ctx.fillText('PP HOMO', startX, midY - 38); ctx.fillText('B  06:28', startX, midY + 38);
                startX += 460; ctx.font = 'italic bold 85px sans-serif';
                ctx.fillText('(RoHS)', startX, midY);

                const texture = new THREE.CanvasTexture(canvas);
                texture.center.set(0.5, 0.5); texture.rotation = (Math.PI / 2) + Math.PI; 
                texture.anisotropy = 16;
                return texture;
            }
        }

        class WoodPallets {
            constructor(width = 120, length = 100, height = 15) {
                this.width = width; this.length = length; this.height = height;
                this.group = new THREE.Group();
                const woodMaterial = new THREE.MeshStandardMaterial({ color: 0x8b5a2b, roughness: 0.9 });
                for (let i = 0; i < 7; i++) {
                    const board = new THREE.Mesh(new THREE.BoxGeometry(14, 2, this.length), woodMaterial);
                    board.position.set(-this.width/2 + 7 + (i * 17.5), this.height - 1, 0);
                    this.group.add(board);
                }
                for (let i = 0; i < 3; i++) {
                    const stringer = new THREE.Mesh(new THREE.BoxGeometry(4, this.height - 4, this.length), woodMaterial);
                    stringer.position.set(-this.width/2 + 2 + (i * (this.width/2 - 2)), (this.height-4)/2 + 2, 0);
                    this.group.add(stringer);
                }
            }
        }

        class PlasticPallets {
            constructor(width = 120, length = 100, height = 15, color = 0x0a3d91) {
                this.width = width; this.length = length; this.height = height;
                this.group = new THREE.Group();
                const plasticMaterial = new THREE.MeshStandardMaterial({ color: color, roughness: 0.6, metalness: 0.1 });
                const topDeck = new THREE.Mesh(new THREE.BoxGeometry(this.width, 3, this.length), plasticMaterial);
                topDeck.position.y = this.height - 1.5;
                this.group.add(topDeck);
                const legPositions = [
                    { x: -this.width/2 + 7.5, z: -this.length/2 + 7.5 }, { x: 0, z: -this.length/2 + 7.5 }, { x: this.width/2 - 7.5, z: -this.length/2 + 7.5 },
                    { x: -this.width/2 + 7.5, z: 0 }, { x: 0, z: 0 }, { x: this.width/2 - 7.5, z: 0 },
                    { x: -this.width/2 + 7.5, z: this.length/2 - 7.5 }, { x: 0, z: this.length/2 - 7.5 }, { x: this.width/2 - 7.5, z: this.length/2 - 7.5 }
                ];
                legPositions.forEach(pos => {
                    const leg = new THREE.Mesh(new THREE.BoxGeometry(15, this.height - 3, 15), plasticMaterial);
                    leg.position.set(pos.x, (this.height - 3) / 2, pos.z);
                    this.group.add(leg);
                });
                [ -this.length/2 + 7.5, 0, this.length/2 - 7.5 ].forEach(zPos => {
                    const skid = new THREE.Mesh(new THREE.BoxGeometry(this.width, 2, 15), plasticMaterial);
                    skid.position.set(0, 1, zPos);
                    this.group.add(skid);
                });
            }
        }

        class PlasticHood {
            constructor(width, height, depth) {
                const geometry = new THREE.BoxGeometry(width + 2, height + 1, depth + 2);
                const material = new THREE.MeshPhysicalMaterial({
                    color: 0xffffff,
                    transparent: true,
                    opacity: 0.35,
                    roughness: 0.1,
                    metalness: 0,
                    transmission: 0.5, 
                    thickness: 0.5,
                    side: THREE.DoubleSide
                });
                this.mesh = new THREE.Mesh(geometry, material);
                const edges = new THREE.EdgesGeometry(geometry);
                const line = new THREE.LineSegments(edges, new THREE.LineBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.2 }));
                this.mesh.add(line);
            }
        }

        class BoxProduct {
            constructor(width, height, depth, position, rotation = {x:0, y:0, z:0}) {
                const geometry = new THREE.BoxGeometry(width, height, depth);
                const frontTex = ArtworkGenerator.createFrontLabel();
                const sideTex = ArtworkGenerator.createSideTexture();
                const baseMat = (c) => new THREE.MeshStandardMaterial({ color: c, roughness: 0.7 });
                const materials = [
                    baseMat(0xeeeeee), new THREE.MeshStandardMaterial({ map: sideTex }), baseMat(0xffffff), 
                    baseMat(0xcccccc), new THREE.MeshStandardMaterial({ map: frontTex }), baseMat(0xeeeeee)
                ];
                this.mesh = new THREE.Mesh(geometry, materials);
                this.mesh.position.set(position.x, position.y, position.z);
                this.mesh.rotation.set(rotation.x, rotation.y, rotation.z);
                const edges = new THREE.EdgesGeometry(geometry);
                this.mesh.add(new THREE.LineSegments(edges, new THREE.LineBasicMaterial({ color: 0x999999 })));
            }
        }

        class BoxApp {
            constructor() {
                this.scene = new THREE.Scene();
                this.scene.background = new THREE.Color(0x1a1a1a);
                this.camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 5000);
                this.camera.position.set(500, 500, 800);
                this.renderer = new THREE.WebGLRenderer({ antialias: true });
                this.renderer.setSize(window.innerWidth, window.innerHeight);
                document.body.appendChild(this.renderer.domElement);
                this.controls = new OrbitControls(this.camera, this.renderer.domElement);
                this.controls.target.set(0, 80, 0);
                this.controls.update();
                this.initLights();
                this.initEnvironment();
                this.initLayout();
                this.animate();
            }
            initLights() {
                this.scene.add(new THREE.AmbientLight(0xffffff, 0.6));
                const dLight = new THREE.DirectionalLight(0xffffff, 0.8);
                dLight.position.set(200, 600, 200);
                this.scene.add(dLight);
            }
            initEnvironment() {
                const gridHelper = new THREE.GridHelper(1500, 30, 0x444444, 0x333333);
                this.scene.add(gridHelper);
            }
            createPatternA() {
                const group = new THREE.Group();
                const boxW = 27; const boxH = 40; const boxD = 12; const spacing = 0.5;
                group.add(new BoxProduct(boxW, boxH, boxD, { x: -(boxW + spacing), y: 0, z: 13.5 }, { x: -Math.PI/2, y: 0, z: 0 }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: 0, y: 0, z: 13.5 }, { x: -Math.PI/2, y: 0, z: 0 }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: (boxW + spacing), y: 0, z: 13.5 }, { x: -Math.PI/2, y: 0, z: Math.PI }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: -20.25, y: 0, z: -20 }, { x: -Math.PI/2, y: 0, z: -Math.PI/2 }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: 20.25, y: 0, z: -20 }, { x: -Math.PI/2, y: 0, z: -Math.PI/2 }).mesh);
                return group;
            }
            createPatternB() {
                const group = new THREE.Group();
                const boxW = 27; const boxH = 40; const boxD = 12; const spacing = 0.5;
                group.add(new BoxProduct(boxW, boxH, boxD, { x: -20.25, y: 0, z: 20 }, { x: -Math.PI/2, y: 0, z: Math.PI/2 }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: 20.25, y: 0, z: 20 }, { x: -Math.PI/2, y: 0, z: Math.PI/2 }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: -(boxW + spacing), y: 0, z: -13.5 }, { x: -Math.PI/2, y: 0, z: 0 }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: 0, y: 0, z: -13.5 }, { x: -Math.PI/2, y: 0, z: 0 }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: (boxW + spacing), y: 0, z: -13.5 }, { x: -Math.PI/2, y: 0, z: Math.PI }).mesh);
                return group;
            }
            initLayout() {
                const pW = 120; const pL = 100; const pH = 15; const bD = 12; 
                const normalLabelText = '1126NK 0260204008';
                const hoodLabelText = '1126NK 0260204008 + Plastic Hood';

                // 1. Wood Pallet (Left)
                const woodGroup = new THREE.Group();
                woodGroup.add(new WoodPallets(pW, pL, pH).group);
                for (let i = 1; i <= 8; i++) {
                    let layer = (i % 2 !== 0) ? this.createPatternA() : this.createPatternB();
                    layer.position.y = pH + (bD / 2) + ((i - 1) * bD);
                    woodGroup.add(layer);
                }
                const woodLabel = ArtworkGenerator.createFloatingLabel(normalLabelText, '#deb887');
                woodLabel.position.set(0, pH + (8 * bD) + 30, 0);
                woodGroup.add(woodLabel);
                woodGroup.position.x = -250;
                this.scene.add(woodGroup);

                // 2. Plastic Pallet Blue (Center)
                const plasticBlue = new THREE.Group();
                plasticBlue.add(new PlasticPallets(pW, pL, pH, 0x0a3d91).group);
                for (let i = 1; i <= 12; i++) {
                    let layer = (i % 2 !== 0) ? this.createPatternB() : this.createPatternA();
                    layer.position.y = pH + (bD / 2) + ((i - 1) * bD);
                    plasticBlue.add(layer);
                }
                const blueLabel = ArtworkGenerator.createFloatingLabel(normalLabelText, '#4dabf7');
                blueLabel.position.set(0, pH + (12 * bD) + 30, 0);
                plasticBlue.add(blueLabel);
                plasticBlue.position.x = 0;
                this.scene.add(plasticBlue);

                // 3. Plastic Pallet Red + Hood (Right)
                const plasticRed = new THREE.Group();
                const redPalletColor = 0xc0392b; 
                plasticRed.add(new PlasticPallets(pW, pL, pH, redPalletColor).group);
                for (let i = 1; i <= 12; i++) {
                    let layer = (i % 2 !== 0) ? this.createPatternA() : this.createPatternB();
                    layer.position.y = pH + (bD / 2) + ((i - 1) * bD);
                    plasticRed.add(layer);
                }
                const hood = new PlasticHood(pW, 12 * bD, pL);
                hood.mesh.position.y = pH + ((12 * bD) / 2);
                plasticRed.add(hood.mesh);

                const redLabel = ArtworkGenerator.createFloatingLabel(hoodLabelText, '#ff4d4d');
                redLabel.position.set(0, pH + (12 * bD) + 30, 0);
                plasticRed.add(redLabel);

                plasticRed.position.x = 250;
                this.scene.add(plasticRed);
            }
            animate() {
                requestAnimationFrame(() => this.animate());
                this.controls.update();
                this.renderer.render(this.scene, this.camera);
            }
        }
        window.onload = () => new BoxApp();
    </script>
</body>
</html>
