<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>3D Box Layering System - IRPC Public Company Limited</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #1a1a1a; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; touch-action: none; }
        
        /* ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏´‡∏•‡∏±‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô - ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
        #main-header {
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 5;
            text-align: center;
            pointer-events: none;
            width: 90%;
        }
        #main-header h1 {
            color: #ffffff;
            margin: 0;
            font-size: clamp(16px, 4vw, 24px);
            letter-spacing: 1px;
            text-shadow: 0 0 15px rgba(0, 212, 255, 0.6);
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 20px;
            border-radius: 50px;
            border: 1px solid rgba(0, 212, 255, 0.3);
            display: inline-block;
            white-space: nowrap;
        }

        /* ‡∏õ‡∏∏‡πà‡∏° Toggle ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô (Touch Target) */
        #toggle-info {
            position: absolute;
            top: 15px;
            left: 15px;
            z-index: 20;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: all 0.3s;
            -webkit-tap-highlight-color: transparent;
        }
        
        #info {
            position: absolute;
            top: 70px;
            left: 15px;
            right: 15px;
            max-width: 320px;
            color: white;
            background: rgba(0,0,0,0.9);
            padding: 15px;
            border-radius: 12px;
            z-index: 10;
            border: 1px solid #444;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            display: none;
            font-size: 14px;
        }
        
        #controls-hint {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            color: #ccc;
            background: rgba(0,0,0,0.6);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            white-space: nowrap;
            pointer-events: none;
        }
        
        #credit {
            position: absolute;
            bottom: 10px;
            right: 15px;
            color: rgba(255,255,255,0.3);
            font-size: 10px;
        }
    </style>
</head>
<body>

    <div id="main-header">
        <h1>IRPC Public Company Limited</h1>
    </div>

    <button id="toggle-info">?</button>

    <div id="info">
        <b style="color: #00d4ff;">‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏û‡∏≤‡πÄ‡∏•‡∏ó‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ù‡∏∏‡πà‡∏ô</b><br>
        <span style="color: #deb887;">‡∏ã‡πâ‡∏≤‡∏¢: Wood Pallet (8 ‡∏ä‡∏±‡πâ‡∏ô)</span><br>
        <span style="color: #4dabf7;">‡∏Å‡∏•‡∏≤‡∏á: Plastic Pallet Blue (12 ‡∏ä‡∏±‡πâ‡∏ô)</span><br>
        <span style="color: #ff4d4d;">‡∏Ç‡∏ß‡∏≤: Plastic Red + Hood Protection</span><br>
        <hr style="border:0; border-top:1px solid #444; margin:10px 0;">
        <small>Floating Labels: 1126NK 0260204008</small>
    </div>

    <div id="controls-hint">
        üì± ‡∏´‡∏°‡∏∏‡∏ô: 1 ‡∏ô‡∏¥‡πâ‡∏ß | ‡∏ã‡∏π‡∏°: 2 ‡∏ô‡∏¥‡πâ‡∏ß | ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô: 3 ‡∏ô‡∏¥‡πâ‡∏ß
    </div>

    <div id="credit">
        Created by Jamorn
    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        // ‡∏£‡∏∞‡∏ö‡∏ö Toggle Info Panel
        const infoBtn = document.getElementById('toggle-info');
        const infoPanel = document.getElementById('info');
        let isPanelVisible = false;

        infoBtn.addEventListener('click', (e) => {
            e.preventDefault();
            isPanelVisible = !isPanelVisible;
            infoPanel.style.display = isPanelVisible ? 'block' : 'none';
            infoBtn.textContent = isPanelVisible ? '‚úï' : '?';
            infoBtn.style.background = isPanelVisible ? 'rgba(255, 77, 77, 0.8)' : 'rgba(255, 255, 255, 0.2)';
        });

        class ArtworkGenerator {
            static createFloatingLabel(text, bgColor = '#00d4ff') {
                const canvas = document.createElement('canvas');
                canvas.width = 1024;
                canvas.height = 256;
                const ctx = canvas.getContext('2d');
                
                ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                ctx.roundRect(0, 0, canvas.width, canvas.height, 40);
                ctx.fill();
                
                ctx.strokeStyle = bgColor;
                ctx.lineWidth = 10;
                ctx.strokeRect(5, 5, canvas.width - 10, canvas.height - 10);
                
                ctx.fillStyle = 'white';
                ctx.font = 'bold 60px sans-serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(text, canvas.width / 2, canvas.height / 2);

                const texture = new THREE.CanvasTexture(canvas);
                const material = new THREE.SpriteMaterial({ map: texture, transparent: true });
                const sprite = new THREE.Sprite(material);
                sprite.scale.set(120, 30, 1);
                return sprite;
            }

            static createFrontLabel() {
                const canvas = document.createElement('canvas');
                canvas.width = 1024; canvas.height = 1500;
                const ctx = canvas.getContext('2d');
                ctx.fillStyle = '#ffffff'; ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.strokeStyle = '#222'; ctx.lineWidth = 40;
                ctx.strokeRect(80, 80, canvas.width - 160, canvas.height - 160);
                
                ctx.fillStyle = '#e91e63'; ctx.font = 'bold 120px sans-serif'; ctx.textAlign = 'center';
                ctx.fillText('PREMIUM', canvas.width / 2, 400);
                ctx.fillStyle = '#333'; ctx.font = 'bold 160px sans-serif';
                ctx.fillText('PRODUCT', canvas.width / 2, 560);
                
                ctx.fillStyle = '#00d4ff'; ctx.fillRect(200, 640, canvas.width - 400, 20);
                ctx.font = '60px sans-serif'; ctx.fillStyle = '#666';
                ctx.fillText('Size: 27 x 40 x 12 cm', canvas.width / 2, 900);
                
                ctx.fillStyle = '#000';
                for(let i=0; i<30; i++) {
                    ctx.fillRect(250 + (i*18), 1100, 10, 150);
                }

                const texture = new THREE.CanvasTexture(canvas);
                texture.anisotropy = 4;
                return texture;
            }

            static createSideTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 2048; canvas.height = 512; // ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏•‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠ Mobile Performance
                const ctx = canvas.getContext('2d');
                ctx.fillStyle = '#ffffff'; ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#000000'; ctx.textBaseline = 'middle';
                const midY = 256;
                const centerX = canvas.width / 2;
                let startX = centerX - 800; 

                ctx.textAlign = 'left';
                ctx.font = 'bold 65px sans-serif';
                ctx.fillText('1126NK 0260204008', startX, midY);
                startX += 700; 

                const symbolX = startX + 50;
                const symbolY = midY;
                ctx.lineWidth = 7; ctx.strokeStyle = '#000';
                ctx.beginPath();
                ctx.moveTo(symbolX, symbolY - 37); ctx.lineTo(symbolX + 37, symbolY); ctx.lineTo(symbolX, symbolY + 37); ctx.lineTo(symbolX - 37, symbolY);
                ctx.closePath(); ctx.stroke();

                ctx.font = 'bold 30px sans-serif';
                ctx.fillText('TIS.1306-2566', symbolX + 55, midY - 19);
                ctx.fillText('PP-01-1-5-F', symbolX + 55, midY + 19);
                startX += 320; 

                const qrX = startX; const qrY = midY - 42;
                ctx.fillRect(qrX, qrY, 85, 85);
                startX += 140; 

                ctx.font = 'bold 37px sans-serif';
                ctx.fillText('PP HOMO', startX, midY - 19); ctx.fillText('B  06:28', startX, midY + 19);

                const texture = new THREE.CanvasTexture(canvas);
                texture.center.set(0.5, 0.5); texture.rotation = (Math.PI / 2) + Math.PI; 
                texture.anisotropy = 4;
                return texture;
            }
        }

        class WoodPallets {
            constructor(width = 120, length = 100, height = 15) {
                this.width = width; this.length = length; this.height = height;
                this.group = new THREE.Group();
                const woodMaterial = new THREE.MeshStandardMaterial({ color: 0x8b5a2b, roughness: 0.9 });
                for (let i = 0; i < 7; i++) {
                    const board = new THREE.Mesh(new THREE.BoxGeometry(14, 2, this.length), woodMaterial);
                    board.position.set(-this.width/2 + 7 + (i * 17.5), this.height - 1, 0);
                    this.group.add(board);
                }
                for (let i = 0; i < 3; i++) {
                    const stringer = new THREE.Mesh(new THREE.BoxGeometry(4, this.height - 4, this.length), woodMaterial);
                    stringer.position.set(-this.width/2 + 2 + (i * (this.width/2 - 2)), (this.height-4)/2 + 2, 0);
                    this.group.add(stringer);
                }
            }
        }

        class PlasticPallets {
            constructor(width = 120, length = 100, height = 15, color = 0x0a3d91) {
                this.width = width; this.length = length; this.height = height;
                this.group = new THREE.Group();
                const plasticMaterial = new THREE.MeshStandardMaterial({ color: color, roughness: 0.6, metalness: 0.1 });
                const topDeck = new THREE.Mesh(new THREE.BoxGeometry(this.width, 3, this.length), plasticMaterial);
                topDeck.position.y = this.height - 1.5;
                this.group.add(topDeck);
                const legPositions = [
                    { x: -this.width/2 + 7.5, z: -this.length/2 + 7.5 }, { x: 0, z: -this.length/2 + 7.5 }, { x: this.width/2 - 7.5, z: -this.length/2 + 7.5 },
                    { x: -this.width/2 + 7.5, z: 0 }, { x: 0, z: 0 }, { x: this.width/2 - 7.5, z: 0 },
                    { x: -this.width/2 + 7.5, z: this.length/2 - 7.5 }, { x: 0, z: this.length/2 - 7.5 }, { x: this.width/2 - 7.5, z: this.length/2 - 7.5 }
                ];
                legPositions.forEach(pos => {
                    const leg = new THREE.Mesh(new THREE.BoxGeometry(15, this.height - 3, 15), plasticMaterial);
                    leg.position.set(pos.x, (this.height - 3) / 2, pos.z);
                    this.group.add(leg);
                });
            }
        }

        class PlasticHood {
            constructor(width, height, depth) {
                const geometry = new THREE.BoxGeometry(width + 2, height + 1, depth + 2);
                const material = new THREE.MeshPhysicalMaterial({
                    color: 0xffffff, transparent: true, opacity: 0.3,
                    roughness: 0.1, transmission: 0.5, thickness: 0.5, side: THREE.DoubleSide
                });
                this.mesh = new THREE.Mesh(geometry, material);
            }
        }

        class BoxProduct {
            constructor(width, height, depth, position, rotation = {x:0, y:0, z:0}) {
                const geometry = new THREE.BoxGeometry(width, height, depth);
                const frontTex = ArtworkGenerator.createFrontLabel();
                const sideTex = ArtworkGenerator.createSideTexture();
                const baseMat = (c) => new THREE.MeshStandardMaterial({ color: c, roughness: 0.7 });
                const materials = [
                    baseMat(0xeeeeee), new THREE.MeshStandardMaterial({ map: sideTex }), baseMat(0xffffff), 
                    baseMat(0xcccccc), new THREE.MeshStandardMaterial({ map: frontTex }), baseMat(0xeeeeee)
                ];
                this.mesh = new THREE.Mesh(geometry, materials);
                this.mesh.position.set(position.x, position.y, position.z);
                this.mesh.rotation.set(rotation.x, rotation.y, rotation.z);
            }
        }

        class BoxApp {
            constructor() {
                this.scene = new THREE.Scene();
                this.scene.background = new THREE.Color(0x1a1a1a);
                this.camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 5000);
                
                // ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
                const camDist = window.innerWidth < 600 ? 1200 : 800;
                this.camera.position.set(camDist, camDist, camDist);
                
                this.renderer = new THREE.WebGLRenderer({ antialias: true, powerPreference: "high-performance" });
                this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); // ‡∏à‡∏≥‡∏Å‡∏±‡∏î Pixel Ratio ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Performance
                this.renderer.setSize(window.innerWidth, window.innerHeight);
                document.body.appendChild(this.renderer.domElement);
                
                this.controls = new OrbitControls(this.camera, this.renderer.domElement);
                this.controls.enableDamping = true;
                this.controls.dampingFactor = 0.05;
                this.controls.target.set(0, 80, 0);
                this.controls.update();

                window.addEventListener('resize', () => this.onResize());
                
                this.initLights();
                this.initEnvironment();
                this.initLayout();
                this.animate();
            }

            onResize() {
                this.camera.aspect = window.innerWidth / window.innerHeight;
                this.camera.updateProjectionMatrix();
                this.renderer.setSize(window.innerWidth, window.innerHeight);
            }

            initLights() {
                this.scene.add(new THREE.AmbientLight(0xffffff, 0.7));
                const dLight = new THREE.DirectionalLight(0xffffff, 0.8);
                dLight.position.set(200, 600, 200);
                this.scene.add(dLight);
            }

            initEnvironment() {
                const gridHelper = new THREE.GridHelper(2000, 40, 0x333333, 0x222222);
                this.scene.add(gridHelper);
            }

            createPatternA() {
                const group = new THREE.Group();
                const boxW = 27; const boxH = 40; const boxD = 12; const spacing = 0.5;
                group.add(new BoxProduct(boxW, boxH, boxD, { x: -(boxW + spacing), y: 0, z: 13.5 }, { x: -Math.PI/2, y: 0, z: 0 }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: 0, y: 0, z: 13.5 }, { x: -Math.PI/2, y: 0, z: 0 }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: (boxW + spacing), y: 0, z: 13.5 }, { x: -Math.PI/2, y: 0, z: Math.PI }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: -20.25, y: 0, z: -20 }, { x: -Math.PI/2, y: 0, z: -Math.PI/2 }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: 20.25, y: 0, z: -20 }, { x: -Math.PI/2, y: 0, z: -Math.PI/2 }).mesh);
                return group;
            }

            createPatternB() {
                const group = new THREE.Group();
                const boxW = 27; const boxH = 40; const boxD = 12; const spacing = 0.5;
                group.add(new BoxProduct(boxW, boxH, boxD, { x: -20.25, y: 0, z: 20 }, { x: -Math.PI/2, y: 0, z: Math.PI/2 }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: 20.25, y: 0, z: 20 }, { x: -Math.PI/2, y: 0, z: Math.PI/2 }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: -(boxW + spacing), y: 0, z: -13.5 }, { x: -Math.PI/2, y: 0, z: 0 }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: 0, y: 0, z: -13.5 }, { x: -Math.PI/2, y: 0, z: 0 }).mesh);
                group.add(new BoxProduct(boxW, boxH, boxD, { x: (boxW + spacing), y: 0, z: -13.5 }, { x: -Math.PI/2, y: 0, z: Math.PI }).mesh);
                return group;
            }

            initLayout() {
                const pW = 120; const pL = 100; const pH = 15; const bD = 12; 
                const normalLabelText = '1126NK 0260204008';

                // ‡∏à‡∏±‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏´‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
                const spread = window.innerWidth < 600 ? 300 : 250;

                // 1. Wood Pallet (Left)
                const woodGroup = new THREE.Group();
                woodGroup.add(new WoodPallets(pW, pL, pH).group);
                for (let i = 1; i <= 8; i++) {
                    let layer = (i % 2 !== 0) ? this.createPatternA() : this.createPatternB();
                    layer.position.y = pH + (bD / 2) + ((i - 1) * bD);
                    woodGroup.add(layer);
                }
                const woodLabel = ArtworkGenerator.createFloatingLabel(normalLabelText, '#deb887');
                woodLabel.position.set(0, pH + (8 * bD) + 30, 0);
                woodGroup.add(woodLabel);
                woodGroup.position.x = -spread;
                this.scene.add(woodGroup);

                // 2. Plastic Pallet Blue (Center)
                const plasticBlue = new THREE.Group();
                plasticBlue.add(new PlasticPallets(pW, pL, pH, 0x0a3d91).group);
                for (let i = 1; i <= 12; i++) {
                    let layer = (i % 2 !== 0) ? this.createPatternB() : this.createPatternA();
                    layer.position.y = pH + (bD / 2) + ((i - 1) * bD);
                    plasticBlue.add(layer);
                }
                const blueLabel = ArtworkGenerator.createFloatingLabel(normalLabelText, '#4dabf7');
                blueLabel.position.set(0, pH + (12 * bD) + 30, 0);
                plasticBlue.add(blueLabel);
                this.scene.add(plasticBlue);

                // 3. Plastic Pallet Red + Hood (Right)
                const plasticRed = new THREE.Group();
                plasticRed.add(new PlasticPallets(pW, pL, pH, 0xc0392b).group);
                for (let i = 1; i <= 12; i++) {
                    let layer = (i % 2 !== 0) ? this.createPatternA() : this.createPatternB();
                    layer.position.y = pH + (bD / 2) + ((i - 1) * bD);
                    plasticRed.add(layer);
                }
                const hood = new PlasticHood(pW, 12 * bD, pL);
                hood.mesh.position.y = pH + ((12 * bD) / 2);
                plasticRed.add(hood.mesh);

                const redLabel = ArtworkGenerator.createFloatingLabel(normalLabelText + ' + Hood', '#ff4d4d');
                redLabel.position.set(0, pH + (12 * bD) + 30, 0);
                plasticRed.add(redLabel);

                plasticRed.position.x = spread;
                this.scene.add(plasticRed);
            }

            animate() {
                requestAnimationFrame(() => this.animate());
                this.controls.update();
                this.renderer.render(this.scene, this.camera);
            }
        }
        
        window.onload = () => new BoxApp();
    </script>
</body>
</html>
